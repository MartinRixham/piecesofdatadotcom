!function(t){if("function"==typeof define&&define.amd)define([],t);else if("object"==typeof module&&module.exports)module.exports=t();else{var e=t();for(var n in e)this[n]=e[n]}}(function(){var t={};t=function(){return t.Datum.apply(this,arguments)};var n,i,e=function(){function t(e,n,i){this.model=e,this.originalPop=e.pop;var r=this;e.pop=function(){var t=r.originalPop.apply(this,arguments);return function(t,e,n){var i=n.pop();i&&i.removeBinding();for(var r=0;r<e.length;r++)e[r].removeLast();t.subscribableLength=t.length,t.indexOf()}(e,n,i),t}}return t.prototype.unbind=function(){this.model.pop=this.originalPop},t}(),r=function(){function t(t,e){this.property=t,this.propertyType=e,t&&this.isBinding(t)?this.binding=t:t instanceof Array?this.binding=e.createArrayBinding(t):t&&"object"==typeof t&&(this.binding=e.createViewModel(t))}return t.prototype.isBinding=function(t){return t&&t.applyBinding&&t.removeBinding},t.prototype.applyBinding=function(t,e,n){this.binding&&this.binding.applyBinding(t,e,n)},t.prototype.removeBinding=function(){this.binding&&this.binding.removeBinding()},t.prototype.isOlderThan=function(t){return("object"==typeof this.property||"object"==typeof t)&&(t&&this.property!==t)},t}(),o=function(l){function t(n,i,r,o){this.model=n,this.originalPush=n.push;var s=this;n.push=function(){s.originalPush.apply(this,arguments);for(var t=0;t<arguments.length;t++){var e=new l(arguments[t],o);p(n,r,i,e)}n.subscribableLength=n.length,n.indexOf()}}function p(t,e,n,i){e.push(i);for(var r=0;r<n.length;r++){var o=n[r].append();i.applyBinding(o,t)}}return t.prototype.unbind=function(){this.model.push=this.originalPush},t}(r),s=function(){function t(t,e,n){this.model=t,this.originalReverse=t.reverse;var i=this;t.reverse=function(){i.originalReverse.apply(this,arguments),function(t,e){for(var n=0;n<t.length;n++){var i=t[n],r=i.removeChildren();i.appendChildren(r.reverse())}e.reverse()}(e,n),t.indexOf()}}return t.prototype.unbind=function(){this.model.reverse=this.originalReverse},t}(),l=function(){function t(e,n,i){this.model=e,this.originalShift=e.shift;var r=this;e.shift=function(){var t=r.originalShift.apply(this,arguments);return function(t,e,n){var i=n.shift();i&&i.removeBinding();for(var r=0;r<e.length;r++)e[r].removeFirst();t.subscribableLength=t.length,t.indexOf()}(e,n,i),t}}return t.prototype.unbind=function(){this.model.shift=this.originalShift},t}(),p=function(){function t(e,n,i){this.model=e,this.originalSort=e.sort,e.sort=function(t){o(e,n,i,t||r),e.indexOf()}}function r(t,e){return e<t?1:t<e?-1:0}function o(t,e,n,i){var r=function(t,e,n){for(var i=function(t){for(var e=[],n=0;n<t.length;n++)for(var i=t[n].removeChildren(),r=0;r<i.length;r++)e[r]||(e[r]=[]),e[r][n]=i[r];return e}(e),r=[],o=0;o<t.length;o++)r.push({model:t[o],property:n[o],children:i[o]});return r}(t,e,n);r.sort(function(t,e){return i(t.model,e.model)}),function(t,e,n,i){for(var r=0;r<t.length;r++){t[r]=i[r].model,n[r]=i[r].property;for(var o=0;o<e.length;o++)e[o].appendChild(i[r].children[o])}}(t,e,n,r)}return t.prototype.unbind=function(){this.model.sort=this.originalSort},t}(),u=function(c){function t(r,o,s,l){this.model=r,this.originalSplice=r.splice;var p=this;r.splice=function(t,e){t=function(t,e){e<0&&(e=t+e);return e=Math.min(t,e),e=Math.max(0,e)}(r.length,t);var n=[].slice.call(arguments,2);!function(t,e,n,i,r){for(var o=0;o<e.length;o++){for(var s=e[o],l=Math.min(i+r,t.length)-1,p=l;i<=p;p--)s.removeAtIndex(p);n.splice(i,r)}}(r,o,s,t,e),function(t,e,n,i,r,o){for(var s=o.length-1;0<=s;s--){var l=new c(o[s],i);n.splice(r,0,l);for(var p=0;p<e.length;p++){var u=e[p],h=u.insertAtIndex(r);l.applyBinding(h,t)}}}(r,o,s,l,t,n);var i=p.originalSplice.apply(this,arguments);return r.subscribableLength=r.length,r.indexOf(),i}}return t.prototype.unbind=function(){this.model.splice=this.originalSplice},t}(r),h=function(l){function t(n,i,r,o){this.model=n,this.originalUnshift=n.unshift;var s=this;n.unshift=function(){s.originalUnshift.apply(this,arguments);for(var t=arguments.length-1;0<=t;t--){var e=new l(arguments[t],o);p(n,i,r,e)}n.subscribableLength=n.length,n.indexOf()}}function p(t,e,n,i){n.unshift(i);for(var r=0;r<e.length;r++){var o=e[r].prepend();i.applyBinding(o,t)}}return t.prototype.unbind=function(){this.model.unshift=this.originalUnshift},t}(r),c=function(){function t(){this.elements=[]}return t.prototype.add=function(t){this.elements.push(t)},t.prototype.removeOld=function(){for(var t=[],e=this.elements.length-1;0<=e;e--){var n=this.elements[e];n.removedFromDocument()&&(this.elements.splice(e,1),t.push(n))}return t},t.prototype.getElementEqualTo=function(t){for(var e=0;e<this.elements.length;e++)if(this.elements[e].equals(t))return this.elements[e]},t.prototype.contains=function(t){for(var e=0;e<this.elements.length;e++)if(this.elements[e].equals(t))return!0;return!1},t.prototype.empty=function(){var t=this.elements;return this.elements=[],t},t.prototype.get=function(){return this.elements},t}(),a=function(){var n=[],i=!1;function t(){}return t.prototype.registerUpdaterAssigner=function(t){i&&n.push(t)},t.prototype.requestRegistrations=function(){n=[],i=!0},t.prototype.assignUpdater=function(t){for(var e=0;e<n.length;e++)n[e](t);i=!1},t}();t.Datum=(n=c,i=a,function(t){var e={datum:t,dependants:new n,registry:new i};return function(t){if(function(t){return void 0===t||t instanceof Node}(t))return function(){var e=this;return this.registry.registerUpdaterAssigner(function(t){e.dependants.add(t)}),this.datum}.call(e);(function(t){this.datum=t,this.dependants.removeOld(),function(t){for(var e=this.dependants.get(),n=0;n<e.length;n++)e[n].call(t)}.call(this,t)}).call(e,t)}});var d,f,m,y,v,g,b,E,w,B,C,P,k,x,O,A,j,q,T,D,U,_,M,I,N,R,S,L,F,V,J=function(r,o,s,e,n,i,l,p,u,h){function t(n,i){var t,e;this.properties=new Array(n.length),this.model=n,this.propertyType=i,this.boundElements=new r,this.methods=[],function(t){for(var e=0;e<n.length;e++)t.properties[e]=new o(n[e],i)}(this),function(){if(void 0===n.subscribableLength){var e=new s(n.length);Object.defineProperty(n,"subscribableLength",{get:function(){return e()},set:function(t){e(t)}})}}(),t=new s,e=n.indexOf,n.indexOf=function(){return arguments.length?t():t(!0),e.apply(n,arguments)}}return t.prototype.applyBinding=function(t,e,n){var i=this.boundElements.removeOld();this.resetElements(i),this.methods.length||(this.methods=this.createArrayMethods()),t.get()&&this.bindElements(t,e,n)},t.prototype.createArrayMethods=function(){var t=this.boundElements.get();return[new e(this.model,t,this.properties,this.propertyType),new n(this.model,t,this.properties),new i(this.model,t,this.properties),new l(this.model,t,this.properties,this.propertyType),new p(this.model,t,this.properties),new u(this.model,t,this.properties),new h(this.model,t,this.properties,this.propertyType)]},t.prototype.bindElements=function(t,e,n){this.boundElements.contains(t)||this.boundElements.add(t.toArrayElement(this.model.length));for(var i=this.boundElements.getElementEqualTo(t),r=e[n],o=0;o<this.properties.length;o++)this.properties[o].applyBinding(i.getChildAtIndex(o),r)},t.prototype.removeBinding=function(){for(var t=0;t<this.methods.length;t++)this.methods[t].unbind();this.methods=[];var e=this.boundElements.empty();this.resetElements(e)},t.prototype.resetElements=function(t){for(var e=0;e<t.length;e++)t[e].reset()},t}(c,r,t.Datum,o,e,l,h,s,p,u),z=function(r){function t(t,i){var e,n;this.domElement=t,this.element=t.get(),this.children=new Array(i),function(t){if(1!==t.element.children.length){throw new Error("An array must be bound to an element with exactly one child.")}}(this),t.createRebinder(function(){}),n=(e=this).element.children[0],e.element.removeChild(n),e.child=new r(n),function(t){for(var e=0;e<i;e++){var n=t.child.clone();t.children[e]=n,t.element.appendChild(n)}}(this)}return t.prototype.append=function(){var t=this.child.clone();return this.children.push(t),this.element.appendChild(t),this.domElement.createElement(t)},t.prototype.prepend=function(){var t=this.child.clone();return this.children.unshift(t),this.element.insertBefore(t,this.element.firstChild),this.domElement.createElement(t)},t.prototype.insertAtIndex=function(t){var e=this.child.clone();return this.element.insertBefore(e,this.children[t]),this.children.splice(t,0,e),this.domElement.createElement(e)},t.prototype.removeFirst=function(){this.element.firstElementChild&&(this.children.shift(),this.element.removeChild(this.element.firstElementChild))},t.prototype.removeLast=function(){this.element.lastElementChild&&(this.children.pop(),this.element.removeChild(this.element.lastElementChild))},t.prototype.removeAtIndex=function(t){var e=this.children.splice(t,1);this.element.removeChild(e[0])},t.prototype.removeChildren=function(){var t=this.children;for(this.children=[];this.element.lastChild;)this.element.removeChild(this.element.lastChild);return t},t.prototype.appendChildren=function(t){for(var e=0;e<t.length;e++){var n=t[e];this.children.push(n),this.element.appendChild(n)}},t.prototype.appendChild=function(t){this.children.push(t),this.element.appendChild(t)},t.prototype.reset=function(){for(this.children=[];this.element.lastChild;)this.element.removeChild(this.element.lastChild);this.element.appendChild(this.child.get())},t.prototype.getChildAtIndex=function(t){return this.domElement.createElement(this.children[t])},t.prototype.removedFromDocument=function(){return this.domElement.removedFromDocument()},t.prototype.equals=function(t){return t.hasEqual(this.element)},t.prototype.hasEqual=function(t){return this.element===t},t.prototype.get=function(){return this.domElement},t}(function(){function t(t){this.element=t,this.index=0}return t.prototype.clone=function(){var t=this.element.cloneNode(!0);return this.number(t,this.index++),t},t.prototype.number=function(t,e){if(t.id&&(t.id=t.id+"_"+e),t.hasAttribute("name")){var n=t.getAttribute("name")+"_"+e;t.setAttribute("name",n)}for(var i=0;i<t.children.length;i++)this.number(t.children[i],e)},t.prototype.get=function(){return this.element},t}()),G=function(){function t(t,e,n){this.callback=t,this.binding=e,this.element=n}return t.prototype.call=function(t){this.callback(t)},t.prototype.removedFromDocument=function(){return this.element.removedFromDocument()},t.prototype.equals=function(t){return t.hasEqual(this.binding,this.element)},t.prototype.hasEqual=function(t,e){return this.binding===t&&this.element.equals(e)},t}(),H=(d=c,f=G,m=a,function(n){var i=new d;function t(){return n.test(this)}return t.applyBinding=function(t,e){!function(t,e){for(var n=e.removeOld(),i=0;i<n.length;i++){var r=n[i].get();r&&t.resetElement(r)}}(n,i),function(t,e,n,i){t.get()&&!i.contains(t)&&(n.setUpElement(e,t.get()),(new m).requestRegistrations(),n.updateElement(e,t.get()),function(e,n,i){var r=!1;(new m).assignUpdater(new f(function(t){r||(r=!0,i.updateElement(e,n.get(),t),r=!1)},i,n))}(e,t,n),i.add(t))}(t,e,n,i)},t.removeBinding=function(){!function(t,e){for(var n=e.empty(),i=0;i<n.length;i++){var r=n[i].get();r&&t.resetElement(r)}}(n,i)},t}),K=function(){function t(t){this.callbacks=t}return t.prototype.setUpElement=function(){},t.prototype.updateElement=function(t,e){var n=this.splitClasses(e);for(var i in this.callbacks){var r=n.indexOf(i);this.callbacks[i].call(t,e)?r<0&&n.push(i):r+1&&n.splice(r,1)}e.className=n.join(" ")},t.prototype.splitClasses=function(t){return t.className?t.className.split(" "):[]},t.prototype.resetElement=function(){},t.prototype.test=function(t){var e={classes:{}};for(var n in this.callbacks)e.classes[n]=this.callbacks[n].bind(t);return e},t}(),Q=function(){function t(t){this.destroy=t}return t.prototype.setUpElement=function(t){this.parentModel=t},t.prototype.updateElement=function(){},t.prototype.resetElement=function(t){this.destroy.call(this.parentModel,t)},t.prototype.test=function(t){return{destroy:this.destroy.bind(t)}},t}(),W=function(){function t(t){this.callbacks=t,this.listeners=[]}return t.prototype.setUpElement=function(t,e){for(var n in this.callbacks){var i=this.callbacks[n],r=this.createListener(t,e,i);this.listeners.push({key:n,element:e,listener:r}),e.addEventListener(n,r)}},t.prototype.createListener=function(e,n,i){return function(t){i.call(e,t,n)}},t.prototype.updateElement=function(){},t.prototype.resetElement=function(t){for(var e=0;e<this.listeners.length;e++){var n=this.listeners[e];if(n.element===t){t.removeEventListener(n.key,n.listener);break}}this.listeners.splice(e,1)},t.prototype.test=function(t){var e={events:{}};for(var n in this.callbacks)e.events[n]=this.callbacks[n].bind(t);return this.callbacks.click&&(e.click=this.callbacks.click.bind(t)),e},t}(),X=function(){function t(t){this.init=t}return t.prototype.setUpElement=function(t,e){this.init.call(t,e)},t.prototype.updateElement=function(){},t.prototype.resetElement=function(){},t.prototype.test=function(t){return{init:this.init.bind(t)}},t}(),Y=function(){function t(t){this.text=t}return t.prototype.setUpElement=function(){},t.prototype.updateElement=function(t,e){e.textContent=this.text.call(t,e)},t.prototype.resetElement=function(t){t.textContent=""},t.prototype.test=function(t){return{text:this.text.bind(t)}},t}(),Z=function(){function t(t){this.update=t}return t.prototype.setUpElement=function(){},t.prototype.updateElement=function(t,e){this.update.call(t,e)},t.prototype.resetElement=function(){},t.prototype.test=function(t){return{update:this.update.bind(t)}},t}(),$=function(){function t(t){this.value=t,this.listeners=[]}return t.prototype.setUpElement=function(e,n){var i=this;function t(t){i.value.call(e,t.target.value,n)}this.listeners.push({element:n,listener:t}),n.addEventListener("change",t)},t.prototype.updateElement=function(t,e){var n=this.value.call(t,void 0,e);void 0!==n&&(e.value=n)},t.prototype.resetElement=function(t){for(var e=0;e<this.listeners.length;e++){var n=this.listeners[e];if(n.element===t){t.removeEventListener("change",n.listener),t.value="";break}}this.listeners.splice(e,1)},t.prototype.test=function(t){return{value:this.value.bind(t)}},t}(),tt=function(){function t(t){this.visible=t}return t.prototype.setUpElement=function(){},t.prototype.updateElement=function(t,e){this.visible.call(t,e)?e.style.display=null:e.style.display="none"},t.prototype.resetElement=function(t){t.style.display=null},t.prototype.test=function(t){return{visible:this.visible.bind(t)}},t}();t.Binding=(y=H,v=Y,g=$,b=W,E=X,w=Z,B=tt,C=Q,P=K,function(t){var i=[];function e(){return function(t,e){for(var n={},i=0;i<t.length;i++){var r=t[i].call(e);for(var o in r)n[o]=r[o]}return n}(i,this)}return t.text&&i.push(new y(new v(t.text))),t.value&&i.push(new y(new g(t.value))),t.click&&i.push(new y(new b({click:t.click}))),t.events&&i.push(new y(new b(t.events))),t.init&&i.push(new y(new E(t.init))),t.update&&i.push(new y(new w(t.update))),t.destroy&&i.push(new y(new C(t.destroy))),t.visible&&i.push(new y(new B(t.visible))),t.classes&&i.push(new y(new P(t.classes))),e.applyBinding=function(t,e){for(var n=0;n<i.length;n++)i[n].applyBinding(t,e)},e.removeBinding=function(){for(var t=0;t<i.length;t++)i[t].removeBinding()},e}),t.Classes=(k=K,x=H,function(t){return new x(new k(t))}),t.Click=(O=W,A=H,function(t){return new A(new O({click:t}))}),t.Destroy=(j=Q,q=H,function(t){return new q(new j(t))}),t.Events=(T=W,D=H,function(t){return new D(new T(t))}),t.Init=(U=X,_=H,function(t){return new _(new U(t))}),t.Text=(M=Y,I=H,function(t){return new I(new M(t))}),t.Update=(N=Z,R=H,function(t){return new R(new N(t))}),t.Value=(S=$,L=H,function(t){return new L(new S(t))}),t.Visible=(F=tt,V=H,function(t){return new V(new F(t))});var et,nt,it,rt,ot=function(t,e){function o(t){this.element=t}return o.prototype.isInScope=function(t){return function t(e,n){var i=e.parentElement;return!!i&&(i===n||!i.__DATUM__REBIND&&t(i,n))}(this.element,t)},o.prototype.removedFromDocument=function(){return!document.body.contains(this.element)},o.prototype.getMatchingElements=function(t){for(var e=this.element.querySelectorAll("[data-bind="+t+"]"),n=[],i=0;i<e.length;i++){var r=new o(e[i]);r.isInScope(this.element)&&n.push(r)}return this.element.dataset.bind===t&&n.push(new o(this.element)),n},o.prototype.createRebinder=function(t){this.element.__DATUM__REBIND=t},o.prototype.rebind=function(){this.element.__DATUM__REBIND()},o.prototype.callBindingCallback=function(t){t.onBind&&t.onBind(this.element)},o.prototype.equals=function(t){return t.hasEqual(this.element)},o.prototype.hasEqual=function(t){return this.element===t},o.prototype.toObjectElement=function(){return new t(this.element)},o.prototype.toArrayElement=function(t){return new e(this,t)},o.prototype.get=function(){return this.element},o.prototype.createElement=function(t){return new o(t)},o}(function(){function t(t){this.element=t,this.children=[].slice.call(t.childNodes)}return t.prototype.removeChildren=function(){for(var t=this.element.childNodes,e=t.length-1;0<=e;e--)this.element.removeChild(t[e])},t.prototype.replaceChildren=function(){for(var t=0;t<this.children.length;t++)this.element.appendChild(this.children[t])},t.prototype.removedFromDocument=function(){return!document.contains(this.element)},t.prototype.equals=function(t){return t.hasEqual(this.element)},t.prototype.hasEqual=function(t){return this.element===t},t}(),z),st=function(){function e(){}return e.prototype.isInScope=function(){return!0},e.prototype.removedFromDocument=function(){return!0},e.prototype.getMatchingElements=function(){return[]},e.prototype.createRebinder=function(){},e.prototype.rebind=function(){},e.prototype.callBindingCallback=function(){},e.prototype.equals=function(t){return t instanceof e},e.prototype.hasEqual=function(){return!1},e.prototype.get=function(){return null},e}(),lt=function(e,i,r){function t(t){this.scope=t,this.removed=!1,this.boundElements=new e}return t.prototype.applyBinding=function(t,e,n){for(var i=this.boundElements.removeOld(),r=0;r<i.length;r++)i[r].replaceChildren();t.get()&&this.bindElements(t,e,n)},t.prototype.bindElements=function(t,e,n){this.boundElements.contains(t)?this.updateElement(t,e&&e[n]):(this.boundElements.add(t.toObjectElement()),(new i).requestRegistrations(),this.updateElement(t,e&&e[n]),this.createCallback(this.scope,t))},t.prototype.updateElement=function(t,e){var n=this.boundElements.getElementEqualTo(t);e?this.removed&&(this.removed=!1,n.replaceChildren()):(this.removed=!0,n.removeChildren())},t.prototype.createCallback=function(t,e){var n=!1;(new i).assignUpdater(new r(function(){n||(n=!0,t.rebind(),n=!1)},this,e))},t.prototype.removeBinding=function(){for(var t=this.boundElements.empty(),e=0;e<t.length;e++)t[e].replaceChildren()},t}(c,a,G),pt=function(e,n,i,r,t,o){function s(t){this.model=t,this.boundElements=new e,this.transientProperties={},this.permanentProperties={},new n(t)}return s.prototype.applyBinding=function(t){this.boundElements.removeOld(),this.unbindOldProperties(),this.boundElements.contains(t)||(this.boundElements.add(t),this.createRebinder(t),t.callBindingCallback(this.model)),this.createPermanentProperties(t),this.createTransientProperties(),this.bindProperties(t)},s.prototype.createRebinder=function(t){var e=this;t.createRebinder(function(){s.prototype.applyBinding.call(e,t)})},s.prototype.unbindOldProperties=function(){for(var t in this.transientProperties)this.model[t]||(this.transientProperties[t].removeBinding(),delete this.transientProperties[t])},s.prototype.createPermanentProperties=function(t){for(var e in this.model)this.permanentProperties[e]&&this.permanentProperties[e].hasScope(t)||(this.permanentProperties[e]=new r(this.model[e],this.createPropertyType(),t))},s.prototype.createTransientProperties=function(){for(var t in this.model)this.isNew(t)&&(this.transientProperties[t]&&this.transientProperties[t].removeBinding(),this.transientProperties[t]=new i(this.model[t],this.createPropertyType()))},s.prototype.isNew=function(t){var e=this.transientProperties[t];return!e||e.isOlderThan(this.model[t])},s.prototype.createPropertyType=function(){return new t(function(t){return new s(t)})},s.prototype.bindProperties=function(t){for(var e in this.permanentProperties)for(var n=this.getElements(t,e),i=0;i<n.length;i++){var r=n[i];this.permanentProperties[e].applyBinding(r,this.model,e),this.transientProperties[e].applyBinding(r,this.model,e)}},s.prototype.getElements=function(t,e){var n=t.getMatchingElements(e);return n.length?n:[new o]},s.prototype.removeBinding=function(){for(var t in this.permanentProperties)this.permanentProperties[t].removeBinding(),this.transientProperties[t].removeBinding()},s}(c,function(t){t.toJSON||(t.toJSON=function(){return function(t){var e={};for(var n in t instanceof Array&&(e=[]),t){var i=t[n];i&&i.toJSON&&"object"==typeof i&&(!i.applyBinding||i instanceof Array)&&(e[n]=i.toJSON()),(!i||"object"!=typeof i&&"function"!=typeof i)&&(e[n]=i)}return e}(t)})},r,function(){function t(t,e,n){this.scope=n,this.property=t,this.propertyType=e,this.propertyInjected=!1,"object"!=typeof t||this.isBinding(t)||(this.objectBinding=e.createObjectBinding(n))}return t.prototype.applyBinding=function(t,e,n){"function"==typeof this.property||this.isBinding(this.property)||this.propertyInjected||(this.propertyType.injectProperty(this.property,e,n),this.propertyInjected=!0),this.objectBinding&&this.objectBinding.applyBinding(t,e,n)},t.prototype.isBinding=function(t){return t&&t.applyBinding&&t.removeBinding},t.prototype.removeBinding=function(){this.objectBinding&&this.objectBinding.removeBinding()},t.prototype.hasScope=function(t){return this.scope.equals(t)},t}(),function(r,e,n){function t(t){this.createViewModelCallback=t}return t.prototype.injectProperty=function(t,e,n){var i=new r(t);Object.defineProperty(e,n,{get:function(){return i()},set:function(t){i(t)}})},t.prototype.createViewModel=function(t){return this.createViewModelCallback(t)},t.prototype.createObjectBinding=function(t){return new e(t)},t.prototype.createArrayBinding=function(t){return new n(t,this)},t}(t.Datum,lt,J),st),ut=function(){function t(t){var e=this;this.observer=new MutationObserver(function(){return function(t){var e=t[0];if(e.target.children.length){var n=e.target;this.rebindElement(n)}}.apply(e,arguments)}),this.observer.observe(t,{childList:!0,subtree:!0})}return t.prototype.rebindElement=function(t){t&&t.__DATUM__REBIND?t.__DATUM__REBIND():t&&this.rebindElement(t.parentElement)},t.prototype.disconnect=function(){this.observer.disconnect()},t}();return t.BindingRoot=(et=pt,nt=ut,it=ot,rt=!1,function(t){!function(){if("object"!=typeof t)throw new Error("The binding root must be an object.");if(t instanceof Array)throw new Error("The binding root cannot be an array.")}(),function(){if(rt)throw new Error("The binding root is unique and cannot be instantiated multiple times.");rt=!0}();var e=new et(t);e.applyBinding(new it(document.body));var n=new nt(document.body);return{disconnect:function(){e.removeBinding(),n.disconnect(),rt=!1}}}),t});